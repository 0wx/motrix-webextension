language: node_js
os: linux
dist: bionic
node_js:
  - 12
cache:
  npm: true
script:
  - npm install
  - npm run package
  - 'if [ "TRAVIS_TAG" != "" ]; mv ./packaged/chrome.zip ./packaged/chrome-${TRAVIS_TAG}.zip; fi'
  - 'if [ "TRAVIS_TAG" != "" ]; mv ./packaged/firefox.zip ./packaged/firefox-${TRAVIS_TAG}.zip; fi'
deploy:
  provider: releases
  token: $GITHUB_KEY
  file:
    - ./packaged/chrome-${TRAVIS_TAG}.zip
    - ./packaged/firefox-${TRAVIS_TAG}.zip
  on:
    tags: true
